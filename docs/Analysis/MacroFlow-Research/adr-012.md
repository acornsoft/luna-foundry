# ADR-012: Use Azure CLI for Work Item Linkage to GitHub

**Date:** January 6, 2026  
**Status:** Accepted  
**Deciders:** David Blaszyk (Blaze)  
**Consulted:** Luna Foundry Team  

## Context

The Luna Foundry project requires robust linkage between Azure DevOps work items and the GitHub repository (https://github.com/acornsoft/luna-foundry) for traceability and integration. Initial attempts to use MCP server tools for artifact links failed because they only support Azure DevOps internal resources (VSTFS URIs), not external GitHub URLs.

Work item tags need standardization to include "GitHub; luna-foundry" for filtering and identification. Descriptions should include hyperlinks to the GitHub repository for easy access.

MCP tools are limited to standard fields and do not support custom fields or external hyperlinks directly. Batch updates for tags and descriptions are also restricted.

For reference on agent skills and integrations, see the [Agent Skills Specification](https://agentskills.io/specification).

## Decision

Adopt Azure DevOps CLI (az devops) as the primary tool for updating work items with GitHub linkages, tags, and descriptions. This includes:

- Installing and configuring Azure CLI.
- Using `az devops work item update` commands to add GitHub repository hyperlinks in descriptions.
- Updating tags to "GitHub; luna-foundry; Luna; MacroFlow" for all work items.
- Scripting batch updates for efficiency.

Setup steps:
1. Install Azure CLI.
2. Authenticate with `az login`.
3. Configure defaults for organization and project.
4. Execute updates via CLI commands or scripts.

## Consequences

**Positive:**
- Enables robust, programmatic linkage to GitHub without MCP limitations.
- Supports batch operations for multiple work items.
- Improves traceability between ADO work items and GitHub source code.
- Allows future automation in CI/CD pipelines.

**Negative:**
- Requires additional setup and authentication.
- Dependency on Azure CLI availability in environments.
- Potential learning curve for team members unfamiliar with CLI.

**Risks:**
- Authentication issues if not configured properly.
- CLI version compatibility with ADO APIs.

**Mitigation:**
- Document setup in project README or wiki.
- Test CLI commands in a staging environment first.
- Use scripts for repeatable updates.

## Alternatives Considered

- Continue using MCP tools with description updates only (limited batch support).
- Manual updates in ADO web UI (time-consuming, error-prone).
- Custom MCP extensions (not available, increases complexity).

## References

- Azure CLI Documentation: https://docs.microsoft.com/en-us/cli/azure/devops/
- Luna Foundry GitHub: https://github.com/acornsoft/luna-foundry
- Previous ADRs: adr-001.md to adr-011.md